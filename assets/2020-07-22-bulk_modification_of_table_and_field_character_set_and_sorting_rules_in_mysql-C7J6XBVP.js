import{_ as d}from"./ValaxyMain.vue_vue_type_style_index_0_lang-BWN6FZjJ.js";import{f as o,w as a,e as c,A as g,ag as r,o as y,a as s,H as i,U as l}from"./app-O6veFoRw.js";import"./YunComment.vue_vue_type_style_index_0_lang-BdmCVZ97.js";import"./index-C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-6OskRlK9.js";import"./post-CxZOEfth.js";const b={__name:"2020-07-22-bulk_modification_of_table_and_field_character_set_and_sorting_rules_in_mysql",setup(F,{expose:E}){const n=JSON.parse('{"title":"MySql批量修改表和表内字段的字符集和排序规则","description":"","frontmatter":{"title":"MySql批量修改表和表内字段的字符集和排序规则","categories":["学习笔记"],"tags":["MySql","数据库","Sql"],"date":"2020-07-22 18:28:35"},"headers":[],"relativePath":"pages/posts/2020-07-22-bulk_modification_of_table_and_field_character_set_and_sorting_rules_in_mysql.md","path":"/home/runner/work/blog/blog/pages/posts/2020-07-22-bulk_modification_of_table_and_field_character_set_and_sorting_rules_in_mysql.md","lastUpdated":1733198069000}'),h=g(),e=n.frontmatter||{};return h.meta.frontmatter=Object.assign(h.meta.frontmatter||{},n.frontmatter||{}),r("pageData",n),r("valaxy:frontmatter",e),globalThis.$frontmatter=e,E({frontmatter:{title:"MySql批量修改表和表内字段的字符集和排序规则",categories:["学习笔记"],tags:["MySql","数据库","Sql"],date:"2020-07-22 18:28:35"}}),(t,k)=>{const p=d;return y(),o(p,{frontmatter:c(e)},{"main-content-md":a(()=>k[0]||(k[0]=[s("p",null,"在将测试库的新增表通过Navicat向阿里云的MySql数据库复制后，发现前端页面请求查询失败。",-1),s("p",null,[i("目标数据库的默认排序规则是"),s("code",null,"utf8mb4_0900_ai_ci"),i("，已存在的表都使用了这个编码，而来源数据库的排序规则是"),s("code",null,"utf8mb4_unicode_ci"),i("，新复制的表都用的是后者。")],-1),s("p",null,"数据库进行多表关联查询时，如果两张表的字符集或者排序规则不一致，就会报错。",-1),s("p",null,"从Navicat里手动修改编码效率很低，若只是改一下表，也用不了多久，但问题是只改表是不行的，表内所有varchar的编码并不会跟着表走。",-1),s("p",null,"因此还是需要走批量操作的路子。",-1),s("h4",{id:"批量修改字段",tabindex:"-1"},[i("批量修改字段 "),s("a",{class:"header-anchor",href:"#批量修改字段","aria-label":'Permalink to "批量修改字段"'},"​")],-1),s("div",{class:"language-sql vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"sql"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"	CONCAT"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"		'ALTER TABLE `'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		TABLE_NAME,")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"		'` MODIFY `'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		COLUMN_NAME,")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"		'` '"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		DATA_TYPE,")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"		'('"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		CHARACTER_MAXIMUM_LENGTH,")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"		') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"		( "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CASE"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," WHEN"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," IS_NULLABLE "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'NO'"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," THEN"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ' NOT NULL'"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ELSE"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," ''"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," END"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ),")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"		';'")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"	information_schema"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"COLUMNS")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	TABLE_SCHEMA "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '数据库名'")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	AND"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," (")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	DATA_TYPE "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'varchar'")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"	OR"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," DATA_TYPE "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," 'char'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")])])]),s("button",{class:"collapse"})],-1),s("h4",{id:"批量修改表",tabindex:"-1"},[i("批量修改表 "),s("a",{class:"header-anchor",href:"#批量修改表","aria-label":'Permalink to "批量修改表"'},"​")],-1),s("div",{class:"language-sql vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"sql"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"	CONCAT"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"( "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'ALTER TABLE '"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", TABLE_NAME, "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"' CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," )")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"	information_schema"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"TABLES")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"	TABLE_SCHEMA "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," '数据库名'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])]),s("button",{class:"collapse"})],-1),s("p",null,[i("将以上SQL语句中的"),s("code",null,"utf8mb4"),i("、"),s("code",null,"utf8mb4_unicode_ci"),i("、"),s("code",null,"数据库名"),i("分别改成自己需要的值，成功执行后，将执行结果即SQL语句复制出来，再执行这些SQL语句即可。")],-1)])),"main-header":a(()=>[l(t.$slots,"main-header")]),"main-header-after":a(()=>[l(t.$slots,"main-header-after")]),"main-nav":a(()=>[l(t.$slots,"main-nav")]),"main-content":a(()=>[l(t.$slots,"main-content")]),"main-content-after":a(()=>[l(t.$slots,"main-content-after")]),"main-nav-before":a(()=>[l(t.$slots,"main-nav-before")]),"main-nav-after":a(()=>[l(t.$slots,"main-nav-after")]),comment:a(()=>[l(t.$slots,"comment")]),footer:a(()=>[l(t.$slots,"footer")]),aside:a(()=>[l(t.$slots,"aside")]),"aside-custom":a(()=>[l(t.$slots,"aside-custom")]),default:a(()=>[l(t.$slots,"default")]),_:3},8,["frontmatter"])}}};export{b as default};
