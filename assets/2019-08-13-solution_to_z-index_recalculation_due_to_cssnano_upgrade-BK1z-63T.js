import{_ as m}from"./ValaxyMain.vue_vue_type_style_index_0_lang-BWN6FZjJ.js";import{f as u,w as s,e as f,A as g,ag as p,o as v,a,H as t,U as n}from"./app-O6veFoRw.js";import"./YunComment.vue_vue_type_style_index_0_lang-BdmCVZ97.js";import"./index-C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-6OskRlK9.js";import"./post-CxZOEfth.js";const y={__name:"2019-08-13-solution_to_z-index_recalculation_due_to_cssnano_upgrade",setup(h,{expose:c}){const o=JSON.parse('{"title":"cssnano升级导致z-index被重新计算的解决办法","description":"","frontmatter":{"title":"cssnano升级导致z-index被重新计算的解决办法","date":"2019-08-13 15:55:08","categories":"学习笔记","tags":["vue","vue-cli","webpack"]},"headers":[],"relativePath":"pages/posts/2019-08-13-solution_to_z-index_recalculation_due_to_cssnano_upgrade.md","path":"/home/runner/work/blog/blog/pages/posts/2019-08-13-solution_to_z-index_recalculation_due_to_cssnano_upgrade.md","lastUpdated":1733198069000}'),i=g(),l=o.frontmatter||{};return i.meta.frontmatter=Object.assign(i.meta.frontmatter||{},o.frontmatter||{}),p("pageData",o),p("valaxy:frontmatter",l),globalThis.$frontmatter=l,c({frontmatter:{title:"cssnano升级导致z-index被重新计算的解决办法",date:"2019-08-13 15:55:08",categories:"学习笔记",tags:["vue","vue-cli","webpack"]}}),(e,r)=>{const d=m;return v(),u(d,{frontmatter:f(l)},{"main-content-md":s(()=>r[0]||(r[0]=[a("p",null,"之前遇到了一个遮罩层级的奇怪问题。在dev环境能在弹窗前正常显示的全屏动画，在编译打包以后实际运行时跑到了弹窗的后面。 弹窗的z-index是500，按理说将动画放到501就应该能显示了，结果发现实际编译出来的z-index仅仅是1。 最后发现这个z-index被重新计算是cssnano的杰作。因为它只处理了项目本身的样式，而不包括第三方库的样式。",-1),a("p",null,"cssnano的配置如下：",-1),a("div",{class:"language- vp-adaptive-theme"},[a("button",{title:"Copy Code",class:"copy"}),a("span",{class:"lang"}),a("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[a("code",{"v-pre":""},[a("span",{class:"line"},[a("span",null,'"cssnano": {')]),t(`
`),a("span",{class:"line"},[a("span",null,'    "preset": "advanced",')]),t(`
`),a("span",{class:"line"},[a("span",null,'    "autoprefixer": false,')]),t(`
`),a("span",{class:"line"},[a("span",null,'    "postcss-zindex": false')]),t(`
`),a("span",{class:"line"},[a("span",null,"}")])])]),a("button",{class:"collapse"})],-1),a("p",null,"可见z-index自动重新计算的配置应该是关闭的。 但是这配置实际上是从webpack2的旧项目上拷过来的，而新版本的cssnano已经悄悄修改了配置方式，这个写法等于什么都没配。 修改成以下配置就可以解决问题了：",-1),a("div",{class:"language- vp-adaptive-theme"},[a("button",{title:"Copy Code",class:"copy"}),a("span",{class:"lang"}),a("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[a("code",{"v-pre":""},[a("span",{class:"line"},[a("span",null,'"cssnano": {')]),t(`
`),a("span",{class:"line"},[a("span",null,'    "cssnano-preset-advanced": {')]),t(`
`),a("span",{class:"line"},[a("span",null,'        "zindex": false,')]),t(`
`),a("span",{class:"line"},[a("span",null,'        "autoprefixer": false')]),t(`
`),a("span",{class:"line"},[a("span",null,"    }")]),t(`
`),a("span",{class:"line"},[a("span",null,"}")])])]),a("button",{class:"collapse"})],-1)])),"main-header":s(()=>[n(e.$slots,"main-header")]),"main-header-after":s(()=>[n(e.$slots,"main-header-after")]),"main-nav":s(()=>[n(e.$slots,"main-nav")]),"main-content":s(()=>[n(e.$slots,"main-content")]),"main-content-after":s(()=>[n(e.$slots,"main-content-after")]),"main-nav-before":s(()=>[n(e.$slots,"main-nav-before")]),"main-nav-after":s(()=>[n(e.$slots,"main-nav-after")]),comment:s(()=>[n(e.$slots,"comment")]),footer:s(()=>[n(e.$slots,"footer")]),aside:s(()=>[n(e.$slots,"aside")]),"aside-custom":s(()=>[n(e.$slots,"aside-custom")]),default:s(()=>[n(e.$slots,"default")]),_:3},8,["frontmatter"])}}};export{y as default};
